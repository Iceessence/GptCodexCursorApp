<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Local Cursor</title>
  <link rel="icon" href="/assets/logo.svg">
  <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="topbar-left">
        <img src="/assets/logo.svg" class="logo" alt="Logo">
        <span class="brand">Local Cursor</span>
        <button id="btnNewFile" title="New file (Ctrl+N)">Ôºã File</button>
        <button id="btnNewFolder" title="New folder">Ôºã Folder</button>
        <button id="btnDelete" title="Delete selected">üóë Delete</button>
        <div class="divider"></div>
        <input id="searchBox" placeholder="Search (Enter)" autocomplete="off">
      </div>
      <div class="topbar-right">
        <div class="quickSwitch" role="group" aria-label="Quick backend and model switcher">
          <select id="quickBackendSelect" title="Active backend">
            <option value="ollama">Ollama</option>
            <option value="lmstudio">LM Studio</option>
          </select>
          <input id="quickModelInput" type="search" list="modelOptions" placeholder="Model‚Ä¶" autocomplete="off" title="Active model">
          <button id="btnQuickRefresh" title="Refresh available models">‚ü≥</button>
        </div>
        <div class="statusPill" id="statusPill" role="status" aria-live="polite" data-tone="pending">
          <span class="statusDot"></span>
          <span id="statusText">Loading‚Ä¶</span>
        </div>
        <button id="btnClearChat" title="Clear chat">üßπ</button>
        <button id="btnTheme" title="Toggle theme">üåì</button>
        <button id="btnSettings" class="primary" title="Settings">‚öô Settings</button>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <span>workspace/</span>
        </div>
        <div class="tree" id="fileTree"></div>
      </aside>

      <section class="editorPane">
        <div class="editorBar">
          <span id="currentPath">No file selected</span>
          <div class="editorActions">
            <button id="btnSave" title="Save (Ctrl/Cmd+S)">üíæ Save</button>
            <button id="btnRename" title="Rename">‚úè Rename</button>
          </div>
        </div>
        <div class="findReplace">
          <input id="findInput" placeholder="Find" autocomplete="off">
          <input id="replaceInput" placeholder="Replace" autocomplete="off">
          <button id="btnFindNext">Find next</button>
          <button id="btnReplace">Replace</button>
          <button id="btnReplaceAll">Replace all</button>
        </div>
        <textarea id="editor" spellcheck="false"></textarea>
      </section>

      <section class="chatPane">
        <div class="chatHeader">
          <div class="chatHeaderInfo">
            <div class="chatTitleRow">
              <span class="chatTitle">Chat</span>
              <span id="chatStatus" class="chatStatus" data-tone="idle">Idle</span>
            </div>
            <div class="chatMeta">
              <span id="chatModelLabel" class="chatMetaItem">No model selected</span>
              <span class="chatMetaDivider isHidden" aria-hidden="true">‚Ä¢</span>
              <span id="chatTimerLabel" class="chatMetaItem"></span>
            </div>
          </div>
          <div class="chatHeaderActions">
            <button id="btnStop" title="Stop streaming">‚èπ Stop</button>
          </div>
        </div>
        <div class="chatLogWrapper">
          <div class="chatLog" id="chatLog"></div>
          <button id="btnScrollToBottom" class="scrollToBottom isHidden" type="button">Scroll to latest ‚Üì</button>
        </div>
        <div class="chatInput">
          <textarea id="chatBox" rows="3" placeholder="Ask the local model‚Ä¶"></textarea>
          <div class="chatActions">
            <label><input type="checkbox" id="cbInsert"> Insert response into editor</label>
            <button id="btnAsk">Ask ‚ñ∂</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="settingsPanel" class="settingsPanel hidden" aria-hidden="true">
    <div class="settingsDialog" role="dialog" aria-modal="true">
      <header>
        <h2>Settings</h2>
        <button id="btnCloseSettings" aria-label="Close">‚úï</button>
      </header>
      <div class="settingsBody">
        <label>Backend
          <select id="backendSelect">
            <option value="ollama">Ollama</option>
            <option value="lmstudio">LM Studio</option>
          </select>
        </label>
        <label>Ollama base URL
          <input id="ollamaUrl" type="text" placeholder="http://127.0.0.1:11434">
        </label>
        <label>LM Studio base URL
          <input id="lmstudioUrl" type="text" placeholder="http://127.0.0.1:1234">
        </label>
        <label>Model
          <input id="modelInput" type="search" list="modelOptions" placeholder="e.g. llama3" autocomplete="off">
        </label>
        <label>Temperature
          <input id="temp" type="number" step="0.1" min="0" max="2">
        </label>
        <label>Top P
          <input id="topP" type="number" step="0.05" min="0" max="1">
        </label>
        <label>Max tokens
          <input id="maxToks" type="number" step="1" min="64" max="8192">
        </label>
      </div>
      <footer>
        <span id="settingsStatus" role="status"></span>
        <div class="settingsActions">
          <button id="btnRefreshModels">Refresh models</button>
          <button id="btnSaveSettings" class="primary">Save</button>
        </div>
      </footer>
    </div>
  </div>

  <datalist id="modelOptions"></datalist>

  <script src="/assets/app.js" type="module"></script>
</body>
</html>
